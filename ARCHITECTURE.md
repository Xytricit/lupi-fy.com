# ğŸ—ï¸ Lupi-fy Architecture & System Design

## System Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        LUPI-FY GAME PLATFORM                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    FRONTEND LAYER (HTML/JS)                  â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚                                                               â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚ Game Editor     â”‚  â”‚ Dashboard    â”‚  â”‚ Multiplayer  â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ (Blockly+       â”‚  â”‚ (Analytics   â”‚  â”‚ Lobby        â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  Phaser)        â”‚  â”‚  Charts)     â”‚  â”‚ (WebSocket)  â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚           â”‚                  â”‚                  â”‚           â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚ Asset Manager   â”‚  â”‚ Leaderboard  â”‚  â”‚ Profile      â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ (Upload UI)     â”‚  â”‚ Browser      â”‚  â”‚ Settings     â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚           â”‚                  â”‚                  â”‚           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚              â”‚                  â”‚                  â”‚                â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                 â”‚                                   â”‚
â”‚                    Fetch API + CSRF Tokens                          â”‚
â”‚                                 â”‚                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â–¼                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚               BACKEND API LAYER (Django Rest Framework)      â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚                                                               â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚   â”‚
â”‚  â”‚  â”‚  Game APIs   â”‚  â”‚ Asset APIs   â”‚  â”‚ Score APIs   â”‚       â”‚   â”‚
â”‚  â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚       â”‚   â”‚
â”‚  â”‚  â”‚ â€¢save        â”‚  â”‚ â€¢upload      â”‚  â”‚ â€¢submit      â”‚       â”‚   â”‚
â”‚  â”‚  â”‚ â€¢publish     â”‚  â”‚ â€¢list        â”‚  â”‚ â€¢leaderboard â”‚       â”‚   â”‚
â”‚  â”‚  â”‚ â€¢approve     â”‚  â”‚              â”‚  â”‚ â€¢achievements        â”‚   â”‚
â”‚  â”‚  â”‚ â€¢reject      â”‚  â”‚              â”‚  â”‚              â”‚       â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚   â”‚
â”‚  â”‚                                                               â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚   â”‚
â”‚  â”‚  â”‚   AI APIs    â”‚  â”‚ Creator APIs â”‚  â”‚ Moderation   â”‚       â”‚   â”‚
â”‚  â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚       â”‚   â”‚
â”‚  â”‚  â”‚ â€¢analyze     â”‚  â”‚ â€¢dashboard   â”‚  â”‚ â€¢report      â”‚       â”‚   â”‚
â”‚  â”‚  â”‚ â€¢suggestions â”‚  â”‚ â€¢revenue     â”‚  â”‚ â€¢queue       â”‚       â”‚   â”‚
â”‚  â”‚  â”‚ â€¢templates   â”‚  â”‚ â€¢stats       â”‚  â”‚ â€¢tags        â”‚       â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚   â”‚
â”‚  â”‚                                                               â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚   â”‚
â”‚  â”‚  â”‚ Social APIs  â”‚  â”‚ Multiplayer  â”‚  â”‚Notification  â”‚       â”‚   â”‚
â”‚  â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚       â”‚   â”‚
â”‚  â”‚  â”‚ â€¢profile     â”‚  â”‚ â€¢sessions    â”‚  â”‚ â€¢get         â”‚       â”‚   â”‚
â”‚  â”‚  â”‚ â€¢follow      â”‚  â”‚ â€¢join        â”‚  â”‚ â€¢mark-read   â”‚       â”‚   â”‚
â”‚  â”‚  â”‚ â€¢remix       â”‚  â”‚ â€¢list        â”‚  â”‚              â”‚       â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚   â”‚
â”‚  â”‚                                                               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                   â”‚                                 â”‚
â”‚                      Authentication (JWT)                           â”‚
â”‚                      Authorization (Roles)                          â”‚
â”‚                      Error Handling                                 â”‚
â”‚                                   â”‚                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                   â–¼                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚          DATABASE LAYER (SQLite/PostgreSQL)                  â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚                                                               â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚ Game Models                                           â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ â”œâ”€ Game (id, owner, title, visibility, created_at)   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ â”œâ”€ GameAsset (file, type, metadata)                  â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ â”œâ”€ GameVersion (version_number, logic_json)          â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ â””â”€ GameReport (reason, status)                       â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                               â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚ Score & Achievement Models                           â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ â”œâ”€ Score (player, game, value, created_at)           â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ â”œâ”€ Achievement (name, description)                   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ â”œâ”€ UserAchievement (user, achievement, game)         â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ â””â”€ Leaderboard (computed from Score)                 â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                               â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚ User & Social Models                                 â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ â”œâ”€ CustomUser (email, password, is_active)           â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ â”œâ”€ UserProfile (role, bio, avatar, games_created)    â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ â”œâ”€ UserNotification (title, message, read)           â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ â”œâ”€ UserPreference (notifications, theme)             â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ â””â”€ Followers (many-to-many)                          â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                               â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚ Monetization & Analytics                             â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ â”œâ”€ Transaction (game, user, amount, status)           â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ â”œâ”€ GameStats (views, plays, avg_score)               â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ â””â”€ CreatorMetrics (revenue, game_count)              â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow Diagrams

### 1. Game Creation Flow
```
Developer
    â”‚
    â”œâ”€â†’ [/games/editor-enhanced/]
    â”‚   â”‚
    â”‚   â”œâ”€â†’ Select Blocks (Events, Actions, Physics)
    â”‚   â”‚
    â”‚   â”œâ”€â†’ Upload Assets
    â”‚   â”‚   â””â”€â†’ POST /games/api/upload-asset/
    â”‚   â”‚       â””â”€â†’ [Database: GameAsset]
    â”‚   â”‚
    â”‚   â”œâ”€â†’ Arrange Logic
    â”‚   â”‚   â””â”€â†’ Blockly â†’ JSON
    â”‚   â”‚
    â”‚   â”œâ”€â†’ Click Save
    â”‚   â”‚   â””â”€â†’ POST /games/api/save/
    â”‚   â”‚       â”œâ”€â†’ Create Game
    â”‚   â”‚       â”œâ”€â†’ Create GameVersion
    â”‚   â”‚       â””â”€â†’ [Database: Game, GameVersion]
    â”‚   â”‚
    â”‚   â””â”€â†’ Click Publish
    â”‚       â””â”€â†’ POST /games/api/publish/
    â”‚           â”œâ”€â†’ Set visibility=pending
    â”‚           â”œâ”€â†’ Send notification to moderators
    â”‚           â””â”€â†’ [Database: Game.visibility, UserNotification]
    â”‚
    â””â”€â†’ Moderator
        â”‚
        â”œâ”€â†’ [/games/moderation/]
        â”‚   â”‚
        â”‚   â””â”€â†’ Review Game
        â”‚       â”œâ”€â†’ Click Approve
        â”‚       â”‚   â””â”€â†’ POST /games/api/approve/
        â”‚       â”‚       â”œâ”€â†’ Set visibility=public
        â”‚       â”‚       â””â”€â†’ [Database: Game.visibility]
        â”‚       â”‚
        â”‚       â””â”€â†’ Click Reject
        â”‚           â””â”€â†’ POST /games/api/reject/
        â”‚               â”œâ”€â†’ Set visibility=draft
        â”‚               â””â”€â†’ [Database: Game.visibility]
        â”‚
        â””â”€â†’ Game is Public!
            â””â”€â†’ Players can now access & play
```

### 2. Scoring & Leaderboard Flow
```
Player
    â”‚
    â”œâ”€â†’ [Play Game]
    â”‚   â”‚
    â”‚   â””â”€â†’ Achievement: Score 1500
    â”‚       â”‚
    â”‚       â””â”€â†’ POST /games/api/submit-score/
    â”‚           â”œâ”€â†’ Validate score
    â”‚           â”œâ”€â†’ Create Score record
    â”‚           â”œâ”€â†’ Check for achievement triggers (>1000)
    â”‚           â”œâ”€â†’ Create UserAchievement if triggered
    â”‚           â””â”€â†’ [Database: Score, UserAchievement]
    â”‚
    â”œâ”€â†’ [View Leaderboard]
    â”‚   â”‚
    â”‚   â””â”€â†’ GET /games/api/leaderboard/?period=weekly
    â”‚       â”œâ”€â†’ Query Score records
    â”‚       â”œâ”€â†’ Calculate ranks
    â”‚       â”œâ”€â†’ Return top 100
    â”‚       â””â”€â†’ [Frontend: Display Rankings]
    â”‚
    â””â”€â†’ [Check Achievements]
        â”‚
        â””â”€â†’ GET /games/api/achievements/
            â”œâ”€â†’ Query UserAchievement for player
            â”œâ”€â†’ Return earned badges
            â””â”€â†’ [Frontend: Display Achievements]
```

### 3. Creator Analytics Flow
```
Creator
    â”‚
    â”œâ”€â†’ [/games/dashboard/]
    â”‚   â”‚
    â”‚   â”œâ”€â†’ View Key Metrics
    â”‚   â”‚   â””â”€â†’ GET /games/api/creator/dashboard/
    â”‚   â”‚       â”œâ”€â†’ Query Game (owner=creator)
    â”‚   â”‚       â”œâ”€â†’ Query Score (game in creator's games)
    â”‚   â”‚       â”œâ”€â†’ Query Transaction (game in creator's games)
    â”‚   â”‚       â”œâ”€â†’ Calculate: total_plays, total_revenue, followers
    â”‚   â”‚       â””â”€â†’ [Database: Game, Score, Transaction, UserProfile]
    â”‚   â”‚
    â”‚   â”œâ”€â†’ View Game Stats
    â”‚   â”‚   â””â”€â†’ GET /games/api/creator/game-stats/?game_id=X
    â”‚   â”‚       â”œâ”€â†’ Query Score filtered by game
    â”‚   â”‚       â”œâ”€â†’ Calculate: avg_score, high_score, unique_players
    â”‚   â”‚       â””â”€â†’ [Database: Score]
    â”‚   â”‚
    â”‚   â”œâ”€â†’ View Revenue
    â”‚   â”‚   â””â”€â†’ GET /games/api/creator-revenue/
    â”‚   â”‚       â”œâ”€â†’ Query Transaction for all creator's games
    â”‚   â”‚       â”œâ”€â†’ Aggregate: total_revenue by game
    â”‚   â”‚       â””â”€â†’ [Database: Transaction]
    â”‚   â”‚
    â”‚   â””â”€â†’ View Notifications
    â”‚       â””â”€â†’ GET /games/api/notifications/
    â”‚           â”œâ”€â†’ Query UserNotification (user=creator)
    â”‚           â”œâ”€â†’ Filter: read=False for unread count
    â”‚           â””â”€â†’ [Database: UserNotification]
    â”‚
    â””â”€â†’ [Dashboard Updates Automatically]
        â””â”€â†’ Real-time metrics via repeated API calls
```

---

## API Layer Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    REQUEST HANDLER                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  1. Middleware Layer (top-down)                              â”‚
â”‚     â”œâ”€ CORS Headers                                          â”‚
â”‚     â”œâ”€ CSRF Token Validation                                 â”‚
â”‚     â””â”€ Rate Limiting (optional)                              â”‚
â”‚                                                              â”‚
â”‚  2. Authentication Layer                                     â”‚
â”‚     â”œâ”€ JWT Token Extraction                                  â”‚
â”‚     â”œâ”€ Token Validation                                      â”‚
â”‚     â””â”€ User Identification                                   â”‚
â”‚                                                              â”‚
â”‚  3. Authorization Layer                                      â”‚
â”‚     â”œâ”€ @login_required Decorator                             â”‚
â”‚     â”œâ”€ Role-Based Access Check                               â”‚
â”‚     â”‚  â”œâ”€ request.user.profile.role == 'admin'?              â”‚
â”‚     â”‚  â”œâ”€ request.user.profile.role == 'moderator'?          â”‚
â”‚     â”‚  â””â”€ Owner verification for game edits                  â”‚
â”‚     â””â”€ Permission Class Evaluation                           â”‚
â”‚                                                              â”‚
â”‚  4. Request Processing                                       â”‚
â”‚     â”œâ”€ Parse JSON body                                       â”‚
â”‚     â”œâ”€ Validate input (type, length, format)                 â”‚
â”‚     â”œâ”€ Query database via ORM                                â”‚
â”‚     â””â”€ Apply business logic                                  â”‚
â”‚                                                              â”‚
â”‚  5. Error Handling                                           â”‚
â”‚     â”œâ”€ Catch exceptions                                      â”‚
â”‚     â”œâ”€ Log errors                                            â”‚
â”‚     â””â”€ Return HTTP error response                            â”‚
â”‚                                                              â”‚
â”‚  6. Response Generation                                      â”‚
â”‚     â”œâ”€ Serialize data                                        â”‚
â”‚     â”œâ”€ Add metadata (status, timestamp)                      â”‚
â”‚     â”œâ”€ Set HTTP headers                                      â”‚
â”‚     â””â”€ Return JSON response                                  â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Role-Based Access Control (RBAC)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            USER ROLES                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   PLAYER   â”‚  â”‚   DEVELOPER      â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ â€¢ Play     â”‚  â”‚ â€¢ Create games   â”‚  â”‚
â”‚  â”‚   games    â”‚  â”‚ â€¢ Upload assets  â”‚  â”‚
â”‚  â”‚ â€¢ Submit   â”‚  â”‚ â€¢ Save/publish   â”‚  â”‚
â”‚  â”‚   scores   â”‚  â”‚ â€¢ View analytics â”‚  â”‚
â”‚  â”‚ â€¢ View     â”‚  â”‚ â€¢ Request payout â”‚  â”‚
â”‚  â”‚   leaderboardâ”‚  â”‚ â€¢ Create remix   â”‚  â”‚
â”‚  â”‚ â€¢ Follow   â”‚  â”‚ â€¢ Manage profile â”‚  â”‚
â”‚  â”‚   creators â”‚  â”‚ â€¢ Access editor  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  MODERATOR    â”‚  â”‚     ADMIN      â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ â€¢ All Player  â”‚  â”‚ â€¢ All features â”‚ â”‚
â”‚  â”‚   perms       â”‚  â”‚ â€¢ Ban users    â”‚ â”‚
â”‚  â”‚ â€¢ All Dev     â”‚  â”‚ â€¢ Delete games â”‚ â”‚
â”‚  â”‚   perms       â”‚  â”‚ â€¢ View reports â”‚ â”‚
â”‚  â”‚ â€¢ Review gamesâ”‚  â”‚ â€¢ Analytics    â”‚ â”‚
â”‚  â”‚ â€¢ Approve     â”‚  â”‚ â€¢ Settings     â”‚ â”‚
â”‚  â”‚ â€¢ Reject      â”‚  â”‚ â€¢ System admin â”‚ â”‚
â”‚  â”‚ â€¢ View        â”‚  â”‚                â”‚ â”‚
â”‚  â”‚   reports     â”‚  â”‚                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Event Flow Examples

### Example 1: Game Save & Version Control
```
Block Diagram:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    POST    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Editor  â”‚â”€saveâ”€â”€â”€â†’   â”‚ Django   â”‚â”€â”€â”€â†’â”‚ Database   â”‚
â”‚ Form    â”‚            â”‚ View     â”‚    â”‚            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”œâ”€ Game â”€â”€â”  â”‚
                           â–²            â”‚ {new}   â”‚  â”‚
                           â”‚            â”‚         â”‚  â”‚
                      Validate           â”œâ”€ Versionâ”€â”€â”‚
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ {new}  â”‚  â”‚
                      â”‚ â€¢ Title     â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                      â”‚ â€¢ Logic JSONâ”‚              â”‚
                      â”‚ â€¢ Visibilityâ”‚              â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
                                                 Response
                                                   â”‚
                                              game_id
                                              version
                                                   â”‚
                                                  â–¼
                                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                            â”‚ Editor UI  â”‚
                                            â”‚ Updates    â”‚
                                            â”‚ URL w/ ID  â”‚
                                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Time Sequence:
1. User enters title "My Game"
2. User arranges blocks
3. Blockly exports logic to JSON
4. User clicks "Save"
5. Fetch POST /games/api/save/
6. Backend creates Game & GameVersion
7. Response with game_id
8. Frontend updates URL: ?id=<game_id>
9. User can continue editing
```

### Example 2: Leaderboard Ranking
```
Score Submission Chain:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Player   â”‚ scores 1500 points
â”‚ in Game  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚ POST /games/api/submit-score/
     â”‚ {game_id, score: 1500}
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Backend Handler  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. Find game     â”‚
â”‚ 2. Validate      â”‚
â”‚ 3. Create Score  â”‚
â”‚ 4. Check trigger â”‚
â”‚    score > 1000? â”‚
â”‚    â†’ YES         â”‚
â”‚    Create Ach    â”‚
â”‚ 5. Return        â”‚
â”‚    {rank: 42}    â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Show rank: #42   â”‚
â”‚ Unlock badge     â”‚
â”‚ Send toast:      â”‚
â”‚ "Achievement!"   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Rank Calculation:
Count(Score > 1500) + 1 = Rank
```

---

## Deployment Architecture

```
Production Stack:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              LOAD BALANCER (Nginx)            â”‚
â”‚              (Port 80/443)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â–¼           â–¼           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Gunicorn â”‚ â”‚Gunicorn â”‚ â”‚Gunicorn â”‚
â”‚Process1 â”‚ â”‚Process2 â”‚ â”‚Process3 â”‚
â”‚Django   â”‚ â”‚Django   â”‚ â”‚Django   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚           â”‚           â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚                          â”‚
     â–¼                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PostgreSQL DB   â”‚    â”‚ Redis Cache  â”‚
â”‚ (Persistent)    â”‚    â”‚ (Sessions)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ S3/Cloud        â”‚
â”‚ Storage         â”‚
â”‚ (Assets)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Database Schema (Simplified)

```
USERS
â”œâ”€ CustomUser (auth)
â””â”€ UserProfile (roles, stats)
   â””â”€ UserNotification (inbox)

GAMES
â”œâ”€ Game (ownership, metadata)
â”‚  â”œâ”€ GameAsset (sprites, sounds)
â”‚  â””â”€ GameVersion (logic history)
â”œâ”€ Score (leaderboard)
â”œâ”€ Achievement (badges)
â””â”€ UserAchievement (earned badges)

MONETIZATION
â”œâ”€ Transaction (payment tracking)
â””â”€ Creator Stats (aggregated)

SOCIAL
â”œâ”€ UserProfile.followers
â””â”€ Conversation (DM history)
```

---

**Architecture Last Updated:** December 12, 2025  
**Status:** âœ… Production Ready  
**Scalability:** Can handle 10K+ games, 100K+ players
